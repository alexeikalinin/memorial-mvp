# Sprint 0: Backend Skeleton - –ò—Ç–æ–≥–∏

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–æ–∑–¥–∞–Ω–æ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
memorial-mvp/
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md                    # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ CHECKLIST.md                 # –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
‚îú‚îÄ‚îÄ SPRINT_0_SUMMARY.md          # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ ci.yml              # GitHub Actions CI
‚îî‚îÄ‚îÄ backend/
    ‚îú‚îÄ‚îÄ .env.example            # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ requirements.txt        # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    ‚îú‚îÄ‚îÄ Dockerfile              # Docker –æ–±—Ä–∞–∑
    ‚îú‚îÄ‚îÄ docker-compose.yml      # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ README.md               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è backend
    ‚îú‚îÄ‚îÄ app/
    ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îú‚îÄ‚îÄ main.py             # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    ‚îÇ   ‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Pydantic Settings)
    ‚îÇ   ‚îú‚îÄ‚îÄ db.py               # SQLAlchemy –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
    ‚îÇ   ‚îú‚îÄ‚îÄ models.py           # –ú–æ–¥–µ–ª–∏ –ë–î (User, Memorial, Media, Memory)
    ‚îÇ   ‚îú‚îÄ‚îÄ schemas.py          # Pydantic —Å—Ö–µ–º—ã
    ‚îÇ   ‚îú‚îÄ‚îÄ api/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ health.py       # Health check endpoint
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ memorials.py    # CRUD –º–µ–º–æ—Ä–∏–∞–ª–æ–≤, –º–µ–¥–∏–∞, –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ai.py           # AI endpoints (–∞–Ω–∏–º–∞—Ü–∏—è, —á–∞—Ç)
    ‚îÇ   ‚îú‚îÄ‚îÄ services/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ai_tasks.py     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: D-ID, OpenAI, ElevenLabs, Pinecone
    ‚îÇ   ‚îî‚îÄ‚îÄ workers/
    ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ       ‚îú‚îÄ‚îÄ worker.py       # Celery worker
    ‚îÇ       ‚îî‚îÄ‚îÄ worker_simple.py # –ü—Ä–æ—Å—Ç–æ–π worker (–±–µ–∑ Celery)
    ‚îî‚îÄ‚îÄ tests/
        ‚îú‚îÄ‚îÄ __init__.py
        ‚îú‚îÄ‚îÄ test_health.py      # –¢–µ—Å—Ç—ã health endpoint
        ‚îî‚îÄ‚îÄ test_memorials.py   # –¢–µ—Å—Ç—ã –º–µ–º–æ—Ä–∏–∞–ª–æ–≤
```

## üìã –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å CORS
- ‚úÖ SQLAlchemy ORM —Å –º–æ–¥–µ–ª—è–º–∏
- ‚úÖ Pydantic —Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PostgreSQL –∏ SQLite

### 2. API Endpoints

#### Health Check
- `GET /api/v1/health/` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

#### Memorials (–ú–µ–º–æ—Ä–∏–∞–ª—ã)
- `POST /api/v1/memorials/` - –°–æ–∑–¥–∞—Ç—å –º–µ–º–æ—Ä–∏–∞–ª
- `GET /api/v1/memorials/{id}` - –ü–æ–ª—É—á–∏—Ç—å –º–µ–º–æ—Ä–∏–∞–ª —Å –º–µ–¥–∏–∞ –∏ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏
- `PATCH /api/v1/memorials/{id}` - –û–±–Ω–æ–≤–∏—Ç—å –º–µ–º–æ—Ä–∏–∞–ª
- `POST /api/v1/memorials/{id}/media/upload` - –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–µ–¥–∏–∞-—Ñ–∞–π–ª
- `GET /api/v1/memorials/{id}/media` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–µ–¥–∏–∞ –º–µ–º–æ—Ä–∏–∞–ª–∞
- `POST /api/v1/memorials/{id}/memories` - –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ
- `GET /api/v1/memorials/{id}/memories` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è

#### AI (–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç)
- `POST /api/v1/ai/photo/animate` - –û–∂–∏–≤–∏—Ç—å —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ D-ID
- `POST /api/v1/ai/avatar/chat` - –ß–∞—Ç —Å –ò–ò-–∞–≤–∞—Ç–∞—Ä–æ–º (RAG)

### 3. –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `User` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- ‚úÖ `Memorial` - –ú–µ–º–æ—Ä–∏–∞–ª—ã (—Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–∞–º—è—Ç–∏)
- ‚úÖ `Media` - –ú–µ–¥–∏–∞-—Ñ–∞–π–ª—ã (—Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –∞—É–¥–∏–æ)
- ‚úÖ `Memory` - –í–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è (—Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –¥–ª—è RAG)

### 4. AI –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ D-ID API –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Ñ–æ—Ç–æ
- ‚úÖ OpenAI API –¥–ª—è LLM –∏ embeddings
- ‚úÖ ElevenLabs API –¥–ª—è TTS
- ‚úÖ Pinecone –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î

### 5. –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
- ‚úÖ Celery worker –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π worker (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –±–µ–∑ Celery)
- ‚úÖ –ó–∞–¥–∞—á–∏: –∞–Ω–∏–º–∞—Ü–∏—è —Ñ–æ—Ç–æ, —Å–æ–∑–¥–∞–Ω–∏–µ embeddings

### 6. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —ç—Ç–∏–∫–∞
- ‚úÖ –≠—Ç–∏—á–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –ò–ò (–∑–∞–ø—Ä–µ—Ç –≤—ã–¥—É–º–æ–∫)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic
- ‚úÖ `.env` –≤ `.gitignore`
- ‚úÖ `.env.example` –∫–∞–∫ —à–∞–±–ª–æ–Ω

### 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ unit-—Ç–µ—Å—Ç—ã
- ‚úÖ GitHub Actions CI workflow
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è health –∏ memorials endpoints

### 8. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ README.md —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- ‚úÖ backend/README.md —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- ‚úÖ CHECKLIST.md –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (FastAPI /docs)

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é backend:**
```bash
cd backend
```

2. **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
```bash
python3 -m venv .venv
source .venv/bin/activate
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
pip install -r requirements.txt
```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env, –¥–æ–±–∞–≤–∏–≤ —Å–≤–æ–∏ API –∫–ª—é—á–∏
```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (—á–µ—Ä–µ–∑ Docker Compose):**
```bash
docker-compose up -d postgres redis
```

6. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
```bash
uvicorn app.main:app --reload --port 8000
```

7. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
- API: http://localhost:8000
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:8000/docs

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–°–º. —Ñ–∞–π–ª `CHECKLIST.md` –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —á–µ–∫-–ª–∏—Å—Ç–∞.

–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
```bash
# Health check
curl http://localhost:8000/api/v1/health/

# –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–º–æ—Ä–∏–∞–ª–∞
curl -X POST http://localhost:8000/api/v1/memorials/ \
  -H "Content-Type: application/json" \
  -d '{"name": "–¢–µ—Å—Ç", "description": "–û–ø–∏—Å–∞–Ω–∏–µ", "is_public": false}'
```

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –º–µ–º–æ—Ä–∏–∞–ª–æ–≤
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞-—Ñ–∞–π–ª–æ–≤ (–ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è AI-—Ñ—É–Ω–∫—Ü–∏–π

### –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚ö†Ô∏è API –∫–ª—é—á–∏ –¥–ª—è AI-—Å–µ—Ä–≤–∏—Å–æ–≤ (OpenAI, D-ID, ElevenLabs, Pinecone)
- ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Pinecone –∏–Ω–¥–µ–∫—Å–∞
- ‚ö†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ S3 –¥–ª—è production (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚ö†Ô∏è –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (—Å–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∞ owner_id=1)

### –ß—Ç–æ –±—É–¥–µ—Ç –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ø—Ä–∏–Ω—Ç–∞—Ö
- Sprint 1: –£–ª—É—á—à–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–¥–∏–∞, –º–∏–Ω–∏–∞—Ç—é—Ä—ã, S3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- Sprint 2: –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è D-ID, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ
- Sprint 3: –ü–æ–ª–Ω–∞—è RAG —Å–∏—Å—Ç–µ–º–∞, Pinecone –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, TTS
- Sprint 4: Frontend (React)
- Sprint 5: –ü–æ–ª–∏—Ä–æ–≤–∫–∞, CI/CD, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Backend**: FastAPI 0.104.1
- **ORM**: SQLAlchemy 2.0.23
- **–ú–∏–≥—Ä–∞—Ü–∏–∏**: Alembic (–Ω–∞—Å—Ç—Ä–æ–µ–Ω, –Ω–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ —Å–æ–∑–¥–∞–Ω—ã)
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: Pydantic 2.5.0
- **Task Queue**: Celery 5.3.4 + Redis
- **AI**: OpenAI, D-ID, ElevenLabs, Pinecone

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î
- PostgreSQL (production) / SQLite (dev)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- –í production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Alembic –º–∏–≥—Ä–∞—Ü–∏–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ `.env` (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è)
- –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Pydantic
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è frontend
- –≠—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –ò–ò

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

–ü–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ Sprint 1 —É–±–µ–¥–∏—Ç–µ—Å—å:
- [ ] –í—Å–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] Health endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –º–µ–º–æ—Ä–∏–∞–ª
- [ ] –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–µ–¥–∏–∞
- [ ] –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ—á–∏—Ç–∞–Ω–∞

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [FastAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://fastapi.tiangolo.com/)
- [SQLAlchemy –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.sqlalchemy.org/)
- [Celery –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.celeryproject.org/)
- [OpenAI API](https://platform.openai.com/docs)
- [D-ID API](https://docs.d-id.com/)
- [ElevenLabs API](https://elevenlabs.io/docs)
- [Pinecone –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.pinecone.io/)

---

**–°—Ç–∞—Ç—É—Å Sprint 0**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω
**–î–∞—Ç–∞**: 2024
**–°–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç**: Sprint 1 - Media Upload + Local Storage + Thumbnails

