# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis –∏ Celery –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —Ñ–æ—Ç–æ

## –ü—Ä–æ–±–ª–µ–º–∞

–ê–Ω–∏–º–∞—Ü–∏—è —Ñ–æ—Ç–æ —Ç—Ä–µ–±—É–µ—Ç:
- **Redis** - –¥–ª—è –æ—á–µ—Ä–µ–¥–µ–π –∑–∞–¥–∞—á Celery
- **Celery Worker** - –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á

–ï—Å–ª–∏ Redis –Ω–µ –∑–∞–ø—É—â–µ–Ω, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—à–∏–±–∫—É: `Connection refused` –Ω–∞ –ø–æ—Ä—Ç—É 6379.

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Redis:**
```bash
docker run -d -p 6379:6379 --name redis redis
```

**2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Celery Worker:**
```bash
cd backend
source .venv/bin/activate
celery -A app.workers.worker worker --loglevel=info
```

**3. –ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis
docker ps | grep redis

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Celery
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å worker
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Redis –ª–æ–∫–∞–ª—å–Ω–æ

**macOS:**
```bash
brew install redis
brew services start redis
```

**Linux (Ubuntu/Debian):**
```bash
sudo apt-get install redis-server
sudo systemctl start redis
```

**Windows:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WSL –∏–ª–∏ Docker

---

## üìã –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –¢–µ—Ä–º–∏–Ω–∞–ª 1: Backend
```bash
cd backend
source .venv/bin/activate
uvicorn app.main:app --reload --port 8000
```

### –¢–µ—Ä–º–∏–Ω–∞–ª 2: Frontend
```bash
cd frontend
npm run dev
```

### –¢–µ—Ä–º–∏–Ω–∞–ª 3: Redis
```bash
docker run -d -p 6379:6379 --name redis redis
# –∏–ª–∏ –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ:
redis-server
```

### –¢–µ—Ä–º–∏–Ω–∞–ª 4: Celery Worker
```bash
cd backend
source .venv/bin/activate
celery -A app.workers.worker worker --loglevel=info
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Redis:**
```bash
redis-cli ping
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: PONG
```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Celery:**
- –í –ª–æ–≥–∞—Ö worker –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–¥–∞—á–∏

3. **–¢–µ—Å—Ç –∞–Ω–∏–º–∞—Ü–∏–∏:**
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –≤ –º–µ–º–æ—Ä–∏–∞–ª
- –ù–∞–∂–º–∏—Ç–µ "–û–∂–∏–≤–∏—Ç—å —Ñ–æ—Ç–æ"
- –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –∑–∞–¥–∞—á–∏

---

## ‚ö†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "Connection refused"

**–ü—Ä–∏—á–∏–Ω–∞:** Redis –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ Redis
docker ps | grep redis
# –∏–ª–∏
redis-cli ping

# –ï—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω, –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
docker run -d -p 6379:6379 redis
```

### –û—à–∏–±–∫–∞: "Port 6379 already in use"

**–ü—Ä–∏—á–∏–Ω–∞:** Redis —É–∂–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å
lsof -i :6379
# –∏–ª–∏
docker ps | grep redis

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
```

### Celery worker –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏

**–ü—Ä–∏—á–∏–Ω–∞:** Worker –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ Redis

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Redis –∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `REDIS_URL` –≤ `.env` (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `redis://localhost:6379/0`)
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ worker

---

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í `backend/.env`:
```env
REDIS_URL=redis://localhost:6379/0
```

---

## üéØ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ Redis

‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –º–µ–º–æ—Ä–∏–∞–ª–æ–≤
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π
‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞
‚úÖ –ß–∞—Ç —Å –∞–≤–∞—Ç–∞—Ä–æ–º (embeddings —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
‚ùå –ê–Ω–∏–º–∞—Ü–∏—è —Ñ–æ—Ç–æ (—Ç—Ä–µ–±—É–µ—Ç Redis + Celery)

---

## üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å Redis, –º–æ–∂–Ω–æ:
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á (–Ω–∞–ø—Ä–∏–º–µ—Ä, RQ)
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–ª–∞—á–Ω—ã–π Redis (Redis Cloud, Upstash)

---

**–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Redis –∏ Celery, –∞–Ω–∏–º–∞—Ü–∏—è —Ñ–æ—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!** üéâ

